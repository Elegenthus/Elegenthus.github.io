<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.15" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://Elegenthus.github.io/css/style.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type="text/css">
<link rel="alternate" href="https://Elegenthus.github.io/index.xml" type="application/rss+xml" title="Elegenthus&#39;s blog">
<title>æ¡‚å£°å‰ç«¯éƒ¨ç½²è¸©å‘ä¹‹æ—… - Elegenthus&#39;s blog</title>
</head>
<body>

<header>
  <div class="container clearfix">
    <a class="path" href="https://elegenthus.github.io/">[Elegenthus&#39;s blog]</a>
    <span class="caret">((^âˆ€^*))</span>
    <div class="right">
      
    </div>
  </div>
</header>

<div class="container">


<main role="main" class="article">
  
<article class="single" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-07-15">July 15, 2017</time></span>



  </div>
  <h1 class="headline" itemprop="headline">æ¡‚å£°å‰ç«¯éƒ¨ç½²è¸©å‘ä¹‹æ—…</h1>
  <section class="body" itemprop="articleBody">
    

<p>è¿™ä¸¤å¤©è¯•ç€å°†<a href="https://github.com/hdgs/guisheng_fe">åå¤§æ¡‚å£°çš„å‰ç«¯ä»£ç </a>éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼ŒçŸ­çŸ­å‡ å¥ä»£ç å±…ç„¶å†æ—¶ä¸¤å¤©ï¼Œè°¨ä»¥æ­¤æ–‡è®°å½•ä¸¤å¤©ä»¥æ¥è¸©çš„å¤§å¤§å°å°çš„å‘ã€‚</p>

<hr />

<h2 id="æœ¬åœ°æ„å»ºé•œåƒ:0814af543608f4fd171b2e9cf43d9917">æœ¬åœ°æ„å»ºé•œåƒ</h2>

<p>åœ¨å°†nodeåº”ç”¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šä¹‹å‰ï¼Œé¦–å…ˆåœ¨æœ¬åœ°å°è¯•æ„å»ºdockeré•œåƒï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†æ£€æŸ¥éƒ¨ç½²ä»£ç æ˜¯å¦å­˜åœ¨é—®é¢˜</p>

<h3 id="1-1-å®‰è£…docker:0814af543608f4fd171b2e9cf43d9917">1.1 å®‰è£…docker</h3>

<p><a href="https://brew.sh">Homebrew</a> çš„ <a href="https://caskroom.github.io">Cask</a> å·²ç»æ”¯æŒ Docker for Macï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ Homebrew Cask æ¥è¿›è¡Œå®‰è£…ï¼š
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">brew</span> <span class="nx">cask</span> <span class="nx">install</span> <span class="nx">docker</span>
</code></pre></div>
</p>

<h3 id="1-2-åˆ›å»ºnodeåº”ç”¨:0814af543608f4fd171b2e9cf43d9917">1.2 åˆ›å»ºnodeåº”ç”¨</h3>

<h4 id="1-2-1-package-json:0814af543608f4fd171b2e9cf43d9917">1.2.1 package.json</h4>

<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º<code>server</code>æ–‡ä»¶å¤¹ï¼Œæ¥ç€åœ¨<code>server</code>ç›®å½•ä¸‹åˆ›å»º<code>package.json</code>ï¼Œä»¥å®šä¹‰nodeåº”ç”¨ä¸­æ‰€éœ€è¦çš„å„ç§æ¨¡å—ä»¥åŠç›¸å…³çš„é…ç½®ä¿¡æ¯ï¼Œå¯ç”¨<code>npm init</code>è¿›è¡Œäº¤äº’å¼é—®ç­”ç”Ÿæˆï¼Œè¿™é‡Œç»™å‡ºå…¶ä¸­éƒ¨åˆ†ä¿¡æ¯
<div class="highlight"><pre><code class="language-JSON" data-lang="JSON"><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;guisheng&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;index.js&quot;</span><span class="p">,</span>
  <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;node index.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;build&quot;</span><span class="p">:</span> <span class="s2">&quot;rm -rf dist/* &amp;&amp; webpack --config webpack.build.config.js&quot;</span>
  <span class="p">},</span>
  <span class="err">...</span>
  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;koa&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.2.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;koa-router&quot;</span><span class="p">:</span> <span class="s2">&quot;^7.2.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;koa-send&quot;</span><span class="p">:</span> <span class="s2">&quot;^4.1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;koa-useragent&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.0.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;swig&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.4.2&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</p>

<h4 id="1-2-2-node-js:0814af543608f4fd171b2e9cf43d9917">1.2.2 node.js</h4>

<p>ç„¶ååœ¨node.jsæ–‡ä»¶ä¸­å®ç°Viewå±‚ï¼ˆä¼ ç»Ÿåç«¯MVCä¸­çš„Viewï¼‰ï¼Œä¸»è¦è´Ÿè´£æ¸²æŸ“åŒæ­¥è·¯ç”±çš„æ¨¡æ¿ã€‚æ­¤å¤„é€‰ç”¨koa2ä½œä¸ºWebæ¡†æ¶ï¼Œéƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="kr">const</span> <span class="nx">send</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;koa-send&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">Koa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;koa&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">Router</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;koa-router&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">userAgent</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;koa-useragent&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">swig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;swig&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Router</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Koa</span><span class="p">();</span>

<span class="c1">//HTMLæ–‡ä»¶ä½äº../dist/templateä¸­</span>
<span class="kr">const</span> <span class="nx">templateRoot</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&quot;../dist/template&quot;</span><span class="p">)</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">userAgent</span><span class="p">);</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">next</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">swig</span><span class="p">.</span><span class="nx">compileFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">templateRoot</span><span class="p">,</span> <span class="s2">&quot;index.html&quot;</span><span class="p">));</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">template</span><span class="p">({})</span>
<span class="p">});</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/profile/:id&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">next</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">swig</span><span class="p">.</span><span class="nx">compileFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">templateRoot</span><span class="p">,</span> <span class="s2">&quot;profile.html&quot;</span><span class="p">));</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">template</span><span class="p">({})</span>
<span class="p">});</span>

<span class="c1">//å°†../distä¸‹çš„æ–‡ä»¶æ”¾åˆ°/static/ä¸­</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sr">/^\/static(?:\/|$)/</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/static\//</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
     <span class="nx">await</span> <span class="nx">send</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">filePath</span><span class="p">,</span> <span class="p">{</span>
         <span class="nx">root</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&quot;../dist&quot;</span><span class="p">)</span>
     <span class="p">});</span>
<span class="p">})</span>

<span class="nx">app</span>
    <span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">.</span><span class="nx">routes</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">.</span><span class="nx">allowedMethods</span><span class="p">());</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;listening on port 3000&#39;</span><span class="p">);</span>
</code></pre></div>


<h4 id="1-2-3-dockerfile:0814af543608f4fd171b2e9cf43d9917">1.2.3 Dockerfile</h4>

<p>ä¸€ä»½Dockerfileæ–‡ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºéƒ¨ç½²é•œåƒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªDockerfileæ–‡ä»¶</p>

<p><div class="highlight"><pre><code class="language-Dockerfile" data-lang="Dockerfile"><span></span><span class="k">FROM</span><span class="s"> node:latest</span>

<span class="c"># Create app directory</span>
<span class="k">RUN</span> mkdir -p /usr/src/app
<span class="k">WORKDIR</span><span class="s"> /usr/src/app</span>
COPY . /usr/src/app

<span class="c"># Build static file</span>
<span class="k">RUN</span> npm install --registry<span class="o">=</span>https://registry.npm.taobao.org
<span class="k">RUN</span> npm run build

<span class="k">WORKDIR</span><span class="s"> /usr/src/app/server</span>

<span class="c"># Build server file</span>
<span class="k">RUN</span> npm install --registry<span class="o">=</span>https://registry.npm.taobao.org

<span class="c"># Bundle app source</span>
<span class="k">EXPOSE</span><span class="s"> 3000</span>
<span class="k">CMD</span><span class="s"> [ &quot;npm&quot;, &quot;start&quot; ]</span>
</code></pre></div>
</p>

<p>Dockerfileçš„å…·ä½“çš„å†™æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚æ­¤å¤„çš„Dockerfileçš„ä½œç”¨ä¸»è¦æ˜¯ï¼Œæ„å»ºäº†é™æ€æ–‡ä»¶ï¼Œç„¶åå¯åŠ¨äº†nodeæœåŠ¡è¿›ç¨‹ã€‚</p>

<h3 id="1-3-åˆ›å»ºé•œåƒ:0814af543608f4fd171b2e9cf43d9917">1.3 åˆ›å»ºé•œåƒ</h3>

<p>é€šè¿‡è¿è¡Œä¸‹é¢ğŸ‘‡è¿™æ¡æŒ‡ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code>name/application</code>çš„é•œåƒï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹<code>name/application</code>ï¼Œä½†æ˜¯ä¸è¦å¿˜è®°åé¢çš„<code>.</code>ï¼Œå®ƒè¡¨æ˜æ ¹æ®å½“å‰ç›®å½•ä¸‹çš„Dockerfileæ„å»ºé•œåƒ
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">docker</span> <span class="nx">build</span> <span class="o">-</span><span class="nx">t</span> <span class="nx">name</span><span class="o">/</span><span class="nx">application</span> <span class="p">.</span>
</code></pre></div>

å¦‚æœæœ€åçœ‹åˆ°<code>successful</code>çš„æç¤ºï¼Œé‚£å°±ä»£è¡¨é•œåƒæ„å»ºæˆåŠŸï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥å•¦</p>

<h4 id="ps-å¯èƒ½å¤±è´¥åŸå› å¦‚ä¸‹:0814af543608f4fd171b2e9cf43d9917">psï¼šå¯èƒ½å¤±è´¥åŸå› å¦‚ä¸‹ï¼š</h4>

<ul>
<li>ç½‘ç»œæ•…éšœï¼Œé‚£ä¹ˆå¯ä»¥ç­‰ç½‘å¥½ä¸€ç‚¹å†è¯•ä¸€æ¬¡</li>
<li>ä»£ç é”™è¯¯ï¼Œæ­¤æ—¶åˆ™æ³¨æ„çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œæ ¹æ®æŠ¥é”™ä¿¡æ¯ä¿®æ”¹</li>
<li>Dockerç‰ˆæœ¬å¤ªä½ï¼Œå…ˆä½¿ç”¨<code>docker -v</code>æŸ¥çœ‹ç‰ˆæœ¬ï¼Œæ ¹æ®éœ€è¦å‡çº§Dockerç‰ˆæœ¬</li>
</ul>

<h3 id="1-4-éƒ¨ç½²æµ‹è¯•åº”ç”¨:0814af543608f4fd171b2e9cf43d9917">1.4 éƒ¨ç½²æµ‹è¯•åº”ç”¨</h3>

<p>ç°åœ¨ä¸€åˆ‡å°±ç»ªï¼Œåœ¨æœ¬åœ°è¿è¡Œé•œåƒè¯•è¯•çœ‹ï¼Œæ­¤å¤„æˆ‘ç»§ç»­é€‰æ‹©å°†é•œåƒæ˜ å°„åˆ°3000ç«¯å£
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">docker</span> <span class="nx">run</span> <span class="o">-</span><span class="nx">p</span> <span class="mi">3000</span><span class="o">:</span><span class="mi">3000</span> <span class="o">-</span><span class="nx">d</span> <span class="nx">name</span><span class="o">/</span><span class="nx">application</span>
</code></pre></div>

ä¹‹åå¯ä»¥ä»ä½¿ç”¨ <code>curl</code> è¾“å‡ºé¡µé¢ä¸Šçš„æ•°æ®ï¼Œæœ¬åœ°æµ‹è¯•æˆåŠŸåæˆ‘ä»¬å°±å¯ä»¥å°†åº”ç”¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šäº†ã€‚</p>

<h2 id="åœ¨é˜¿é‡Œäº‘é•œåƒä»“åº“buildé•œåƒ:0814af543608f4fd171b2e9cf43d9917">åœ¨é˜¿é‡Œäº‘é•œåƒä»“åº“Buildé•œåƒ</h2>

<p>åœ¨ç›´æ¥ç™»å½•æœåŠ¡å™¨ä½¿ç”¨Docker Buildé•œåƒæ—¶ï¼Œåœ¨å› ä¸ºç½‘ç»œé—®é¢˜å¤±è´¥Næ¬¡ä¹‹åï¼Œé«˜äººæŒ‡ç‚¹æˆ‘å»é˜¿é‡Œäº‘é•œåƒä»“åº“Buildé•œåƒã€‚</p>

<p>ä¸ºäº†æ–¹ä¾¿ECSç”¨æˆ·ä½¿ç”¨Dockerå®˜æ–¹é•œåƒï¼Œé˜¿é‡Œäº‘åŒæ­¥Dockerå®˜æ–¹é•œåƒåº“çš„æœ€æ–°ç‰ˆæœ¬åˆ°å›½å†…æœåŠ¡å™¨ï¼Œä½¿å¾—ECSç”¨æˆ·å¯ä»¥é€šè¿‡å†…ç½‘è¿æ¥è¯¥æœåŠ¡å™¨ã€‚</p>

<p>åœ¨ç™»å½•é˜¿é‡Œäº‘è´¦å·åï¼Œè¿›å…¥ç®¡ç†æ§åˆ¶å°ï¼Œæ‰¾åˆ°å®¹å™¨ä»“åº“ä¸­çš„é•œåƒï¼Œè¿›å…¥é•œåƒä»“åº“æ§åˆ¶å°ï¼Œåˆ›å»ºé•œåƒä»“åº“ï¼Œæ ¹æ®æç¤ºä¸€æ­¥ä¸€æ­¥åˆ›å»ºnamespaceç­‰ï¼Œé…ç½®çš„æ—¶å€™é€‰æ‹©å…³è”githubï¼Œè¿™æ ·ä»¥åæ¯æ¬¡æˆ‘ä»¬æ¨é€ä»£ç è‡³githubï¼Œé˜¿é‡Œäº‘å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ„å»ºé•œåƒäº†ã€‚ç„¶åå¼€å§‹ç®¡ç†è‡ªå·±åˆšåˆšåˆ›å»ºçš„é•œåƒï¼Œè¿›å…¥æ„å»ºé¡µé¢ç«‹å³æ„å»ºï¼Œæ¥ç€å°±å¯ä»¥åœ¨æ„å»ºæ—¥å¿—ä¸­æŸ¥çœ‹æ„å»ºçŠ¶æ€äº†ã€‚</p>

<h4 id="ps-å¯èƒ½å­˜åœ¨çš„å‘:0814af543608f4fd171b2e9cf43d9917">psï¼šå¯èƒ½å­˜åœ¨çš„å‘</h4>

<p>å¦‚æœä¸€æ¬¡æ„å»ºå¤±è´¥äº†ï¼ŒæŸ¥çœ‹æ—¥å¿—å¯»æ‰¾é”™è¯¯ï¼Œç„¶åé‡æ¨ä¸€æ¬¡ä»£ç åˆ°githubï¼Œé‡æ–°æ„å»ºä¸€èˆ¬å°±èƒ½æˆåŠŸã€‚</p>

<h2 id="è¿›å…¥æœåŠ¡å™¨éƒ¨ç½²:0814af543608f4fd171b2e9cf43d9917">è¿›å…¥æœåŠ¡å™¨éƒ¨ç½²</h2>

<p>ç„¶åå°±å¯ä»¥ç™»å½•æœåŠ¡å™¨éƒ¨ç½²äº†ã€‚</p>

<h3 id="3-1-cloneä»“åº“:0814af543608f4fd171b2e9cf43d9917">3.1 cloneä»“åº“</h3>

<p>åœ¨ç™»å½•æœåŠ¡å™¨åï¼Œä»githubä¸Šå°†é¡¹ç›®cloneè‡³æœåŠ¡å™¨ä¸Šï¼Œæ¥ä¸‹æ¥å¯ä»¥æŒ‰ç…§é•œåƒä»“åº“é‡Œçš„æ“ä½œæŒ‡å—è¿›è¡Œ</p>

<p>åœ¨æœåŠ¡å™¨ä¸Šç™»å½•é˜¿é‡Œäº‘docker registry
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">sudo</span> <span class="nx">docker</span> <span class="nx">login</span> <span class="o">--</span><span class="nx">username</span><span class="o">=</span><span class="nx">ä½ çš„è´¦å·å</span> <span class="nx">registry</span><span class="p">.</span><span class="nx">cn</span><span class="o">-</span><span class="nx">shenzhen</span><span class="p">.</span><span class="nx">aliyuncs</span><span class="p">.</span><span class="nx">com</span>
</code></pre></div>

ç™»å½•registryçš„ç”¨æˆ·åæ˜¯ä½ çš„é˜¿é‡Œäº‘è´¦å·å…¨åï¼Œå¯†ç æ˜¯ä½ å¼€é€šnamespaceæ—¶è®¾ç½®çš„å¯†ç ã€‚</p>

<h3 id="3-2-ä»registryä¸­æ‹‰å–é•œåƒ:0814af543608f4fd171b2e9cf43d9917">3.2 ä»registryä¸­æ‹‰å–é•œåƒï¼š</h3>

<p><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">sudo</span> <span class="nx">docker</span> <span class="nx">pull</span> <span class="nx">registry</span><span class="p">.</span><span class="nx">cn</span><span class="o">-</span><span class="nx">shenzhen</span><span class="p">.</span><span class="nx">aliyuncs</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">ä»“åº“åç§°</span><span class="o">:</span><span class="p">[</span><span class="nx">é•œåƒç‰ˆæœ¬å·</span><span class="p">]</span>
</code></pre></div>

è¿™é‡Œçš„é•œåƒç‰ˆæœ¬å·å¦‚æœæ²¡æœ‰ä½¿ç”¨tagæŒ‡æ˜ï¼Œä¸€èˆ¬å°±æ˜¯<code>latest</code>ï¼Œä¹Ÿå¯ä»¥åœ¨æ„å»ºæ—¥å¿—ä¸­æŸ¥çœ‹å¾—çŸ¥ã€‚</p>

<h3 id="3-3-æŸ¥çœ‹é•œåƒå·:0814af543608f4fd171b2e9cf43d9917">3.3 æŸ¥çœ‹é•œåƒå·</h3>

<p>æ‹‰å–é•œåƒåï¼ŒæŸ¥çœ‹æ–°æ‹‰å–çš„é•œåƒå·
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span> <span class="nx">docker</span> <span class="nx">images</span>
</code></pre></div>
</p>

<h3 id="3-4-è¿è¡Œé•œåƒ:0814af543608f4fd171b2e9cf43d9917">3.4 è¿è¡Œé•œåƒ</h3>

<p>ç„¶åè¿è¡Œé•œåƒï¼Œæ ¹æ®éœ€è¦é€‰æ‹©æ˜ å°„çš„ç«¯å£å·ï¼Œæ­¤å¤„æˆ‘ä»æ˜ å°„åœ¨3000ç«¯å£
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">docker</span> <span class="nx">run</span> <span class="o">-</span><span class="nx">p</span> <span class="mi">3000</span><span class="o">:</span><span class="mi">3000</span> <span class="o">-</span><span class="nx">d</span> <span class="nx">é•œåƒå·</span>
</code></pre></div>
</p>

<p>æˆåŠŸåå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šé€šè¿‡<code>http://[SERVER_IP]:3000</code>è®¿é—®ä½ æ‰€éƒ¨ç½²çš„åº”ç”¨å•¦</p>

<h4 id="ps-å¯èƒ½é‡åˆ°çš„å‘:0814af543608f4fd171b2e9cf43d9917">ps: å¯èƒ½é‡åˆ°çš„å‘ï¼š</h4>

<p>æœ‰çš„æ—¶å€™ä¼šéœ€è¦ä¿®æ”¹ä»£ç é‡æ–°æ„å»ºé•œåƒï¼Œåœ¨å°†é•œåƒpullä¸‹æ¥ä¹‹åï¼Œåº”å…ˆåœæ‰åŸæ¥è¿è¡Œçš„å®¹å™¨</p>

<h5 id="â‘ -æŸ¥çœ‹å®¹å™¨å·:0814af543608f4fd171b2e9cf43d9917">â‘  æŸ¥çœ‹å®¹å™¨å·</h5>

<p><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">docker</span> <span class="nx">ps</span>
</code></pre></div>
</p>

<h5 id="â‘¡-åœæ­¢å®¹å™¨:0814af543608f4fd171b2e9cf43d9917">â‘¡ åœæ­¢å®¹å™¨</h5>

<p><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">docker</span> <span class="nx">stop</span> <span class="nx">å®¹å™¨å·</span>
</code></pre></div>
</p>

<p>ç„¶åç»§ç»­è¿è¡Œé•œåƒå°±å¯ä»¥å•¦</p>

<h2 id="æ€»ç»“:0814af543608f4fd171b2e9cf43d9917">æ€»ç»“</h2>

<p>åˆ°è¿™é‡Œæ¡‚ç”Ÿå‰ç«¯éƒ¨ç½²åˆå°è¯•å°±ç»“æŸå•¦ï¼Œè®°å½•ä¸‹æ¥å¸Œæœ›èƒ½å¯¹å¤§å®¶ä¹Ÿæœ‰æ‰€è£¨ç›Šã€‚</p>

<h1 id="å‚è€ƒæ–‡çŒ®:0814af543608f4fd171b2e9cf43d9917">å‚è€ƒæ–‡çŒ®</h1>

<ul>
<li><a href="https://zxc0328.github.io/2017/06/05/fe-microservice/">å‰ç«¯å¾®æœåŠ¡å®è·µ-ä»¥æœ¨çŠ€é€šè¡Œè¯ä¸ºä¾‹</a></li>
<li><a href="https://www.vultr.com/docs/deploy-a-node-js-application-using-docker">Deploy a Node.js Application Using Docker</a></li>
<li><a href="https://yeasy.gitbooks.io/docker_practice/content/install/mac.html">macOS æ“ä½œç³»ç»Ÿå®‰è£… Docker</a></li>
</ul>

  </section>
</article>

</main>


</div>

<footer>
  <div class="container">
    <span class="copyright">&copy; 2017  Elegenthus&#39;s blog - <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
  </div>
</footer>

</body>
</html>

